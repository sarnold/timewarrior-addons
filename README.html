

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timewarrior addon bits &mdash; timew-addons 0.3.1.dev1+g7e2790d documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=9d39c1c9"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="timew_status" href="api/modules.html" />
    <link rel="prev" title="Developer/User Overview for Timew-Addons" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            timew-addons
              <img src="_static/timew.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Timewarrior addon bits</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-timewarrior">What is timewarrior?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#but-what-are-the-addons">But what are the addons?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start-install">Quick start install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-with-package-manager">Install with package manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-with-pip">Install with pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installed-files">Installed files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generated-files">Generated files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uninstalling">Uninstalling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reporting-examples">Reporting examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extension-usage">Extension usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment">Environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#appindicator-gui">Appindicator GUI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gui-usage">GUI usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-exactly-are-we-tracking">What exactly are we tracking?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#status-indicator-gui">Status indicator GUI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pygobject-references">PyGObject references</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#operating-system-support">Operating System Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">timew_status</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">timew-addons</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Timewarrior addon bits</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="timewarrior-addon-bits">
<h1>Timewarrior addon bits<a class="headerlink" href="#timewarrior-addon-bits" title="Link to this heading"></a></h1>
<p><a class="reference external" href="https://github.com/sarnold/timew-addons/actions/workflows/ci.yml"><img alt="CI workflow status" src="https://github.com/sarnold/timew-addons/actions/workflows/ci.yml/badge.svg" /></a> <a class="reference external" href="https://github.com/sarnold/timew-addons/actions/workflows/release.yml"><img alt="Release workflow status" src="https://github.com/sarnold/timew-addons/actions/workflows/release.yml/badge.svg" /></a></p>
<p><a class="reference external" href="https://github.com/pre-commit/pre-commit"><img alt="pre-commit" src="https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit&amp;amp;logoColor=white" /></a></p>
<p><a class="reference external" href="https://github.com/sarnold/timew-addons/releases"><img alt="GitHub tag" src="https://img.shields.io/github/v/tag/sarnold/timew-addons?color=green&amp;include_prereleases&amp;label=latest%20release" /></a> <a class="reference external" href="https://github.com/sarnold/timew-addons/blob/master/LICENSE"><img alt="License" src="https://img.shields.io/github/license/sarnold/timew-addons" /></a></p>
<section id="what-is-timewarrior">
<h2>What is timewarrior?<a class="headerlink" href="#what-is-timewarrior" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://timewarrior.net/docs/">Timewarrior</a> is a command line time tracking application, which allows
you to record time spent on activities. You may be tracking your time
for curiosity, or because your work requires it</p>
<p>Timewarrior records time, and associates blocks of time with tags. The
recorded data can be exposed as JSON for any app to consume.</p>
<p>Built-in reports, as well as a set of extension reports, provides
plenty of options, in addition to customizing the time reporting using
any programming language.</p>
</section>
<section id="but-what-are-the-addons">
<h2>But what are the addons?<a class="headerlink" href="#but-what-are-the-addons" title="Link to this heading"></a></h2>
<p>This repository is mainly a place for some example report extensions (where
in this case “example” means things actually used for reporting work hrs)
and some experimental UI ideas.</p>
<p>The report extensions here use an existing <a class="reference external" href="https://github.com/lauft/timew-report/">Python binding</a> that
parses stdout from <code class="docutils literal notranslate"><span class="pre">timew</span></code> so the extension scripts must parse stdin
using the timew-report classes. See <a class="reference internal" href="#reporting-examples">Reporting examples</a> for details.</p>
<p>The current UI script uses the <a class="reference external" href="https://pygobject.gnome.org/index.html">PyGObject</a> introspection interface to
import bindings for things like <a class="reference external" href="https://pygobject.gnome.org/tutorials/gtk3.html">Gtk</a>, <a class="reference external" href="https://lazka.github.io/pgi-docs/Notify-0.7/index.html">Notify</a>, and <a class="reference external" href="https://lazka.github.io/pgi-docs/AyatanaAppIndicator3-0.1/index.html">Appindicator</a> to render a
simple tray icon/menu and send desktop notifications. See <a class="reference internal" href="#appindicator-gui">Appindicator GUI</a>
for details.</p>
</section>
<section id="quick-start-install">
<h2>Quick start install<a class="headerlink" href="#quick-start-install" title="Link to this heading"></a></h2>
<p>The appindicator GUI prefers OS package manager over virtual environment
install due to the icon/desktop file integration with an XDG-compliant
desktop, eg, Gnome or XFCE.  While the extension scripts should work
anywhere <code class="docutils literal notranslate"><span class="pre">timew</span></code> can be installed, running the appindicator GUI requires
a real Linux desktop environment.  That said, the GUI script should still
run from local virtual environment, albeit with a fallback set of icons.</p>
<ul class="simple">
<li><p>if on Gentoo, add <a class="reference external" href="https://github.com/VCTLabs/embedded-overlay/">this portage overlay</a> and install <code class="docutils literal notranslate"><span class="pre">timew-addons</span></code></p></li>
<li><p>if on recent Ubuntu LTS, add <a class="reference external" href="https://launchpad.net/~nerdboy/+archive/ubuntu/embedded">this PPA</a> and install <code class="docutils literal notranslate"><span class="pre">timew-addons</span></code></p></li>
</ul>
<section id="install-with-package-manager">
<h3>Install with package manager<a class="headerlink" href="#install-with-package-manager" title="Link to this heading"></a></h3>
<p>OS packages are deployed via multiple methods, including GH release pages
and package overlays for <a class="reference external" href="https://www.gentoo.org/">Gentoo</a> and Ubuntu.</p>
<p>Installing using system package manager is currently only supported on
<a class="reference external" href="https://www.gentoo.org/">Gentoo</a> and requires <a class="reference external" href="https://github.com/VCTLabs/embedded-overlay/">this portage overlay</a>. Use one of the overlay
install methods shown in the <a class="reference external" href="https://github.com/VCTLabs/embedded-overlay/">readme</a> file and sync the overlay; following
the overlay sync, install the package and dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo emerge timew-addons -v --ask
</pre></div>
</div>
<p>When available, use the following <a class="reference external" href="https://launchpad.net/~nerdboy/+archive/ubuntu/embedded">Ubuntu PPA</a> to install on at least
Focal and Jammy.  Make sure you have the <code class="docutils literal notranslate"><span class="pre">add-apt-repository</span></code> command
installed and then add the PPA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install software-properties-common
$ sudo add-apt-repository -y -s ppa:nerdboy/embedded
$ sudo apt-get install timew-addons
</pre></div>
</div>
<p>See <a class="reference external" href="https://launchpad.net/~nerdboy/+archive/ubuntu/embedded">Adding this PPA to your system</a> for more info.</p>
</section>
<section id="install-with-pip">
<h3>Install with pip<a class="headerlink" href="#install-with-pip" title="Link to this heading"></a></h3>
<p>This project is <em>not</em> published on PyPI, thus use one of the
following commands to install the latest version in a Python
virtual environment.</p>
<p>From source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv .venv
$ source .venv/bin/activate
(.venv) $ pip install git+https://github.com/sarnold/timew-addons.git
</pre></div>
</div>
<p>The alternative to python venv is the <a class="reference external" href="https://github.com/tox-dev/tox">Tox</a> automation tool.  If you have it
installed already, clone this repository and try the following commands
from the top-level source directory.</p>
<p>To create a “dev” environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e dev
</pre></div>
</div>
<p>To run the tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tox -e py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After installing in dev mode, use the environment created by
Tox just like any other Python virtual environment.  The dev
install mode of Pip allows you to edit the script and run it
again while inside the virtual environment. By default Tox
environments are created under <code class="docutils literal notranslate"><span class="pre">.tox/</span></code> and named after the
env argument (eg, dev).</p>
</div>
</section>
<section id="installed-files">
<h3>Installed files<a class="headerlink" href="#installed-files" title="Link to this heading"></a></h3>
<p>Whether installed via OS packages or <code class="docutils literal notranslate"><span class="pre">pip</span></code>, the installed files are
essentially the same, other than packaging-specific requirements and
generated python byte-code. In the latter case, the list of installed
files can be obtained with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m pip show -f timew-addons
Name: timew-addons
Version: 0.2.2.dev0+g4659e21.d20240901
Summary: A collection of timewarrior extensions and experiments
Home-page: https://github.com/sarnold/timew-addons
Author: Stephen L Arnold
Author-email: nerdboy@gentoo.org
License: GPLv3+
Location: /home/nerdboy/src/timew-addons/.tox/py/lib/python3.11/site-packages
Requires: munch, pycairo, PyGObject, timew-report
Required-by:
Files:
  ../../../bin/timew-status-indicator
  ../../../share/applications/timew-status-indicator.desktop
  ../../../share/icons/hicolor/48x48/apps/timew.png
  ../../../share/icons/hicolor/scalable/apps/timew.svg
  ../../../share/icons/hicolor/scalable/status/timew_error.svg
  ../../../share/icons/hicolor/scalable/status/timew_inactive.svg
  ../../../share/icons/hicolor/scalable/status/timew_info.svg
  ../../../share/icons/hicolor/scalable/status/timew_warning.svg
  ../../../share/timew-addons/extensions/__pycache__/csv_rpt.cpython-311.pyc
  ../../../share/timew-addons/extensions/__pycache__/onelineday.cpython-311.pyc
  ../../../share/timew-addons/extensions/__pycache__/totals.cpython-311.pyc
  ../../../share/timew-addons/extensions/csv_rpt.py
  ../../../share/timew-addons/extensions/onelineday.py
  ../../../share/timew-addons/extensions/totals.py
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/INSTALLER
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/METADATA
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/RECORD
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/REQUESTED
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/WHEEL
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/direct_url.json
  timew_addons-0.2.2.dev0+g4659e21.d20240901.dist-info/top_level.txt
  timew_status/__init__.py
  timew_status/__pycache__/__init__.cpython-311.pyc
  timew_status/__pycache__/utils.cpython-311.pyc
  timew_status/utils.py
</pre></div>
</div>
</section>
<section id="generated-files">
<h3>Generated files<a class="headerlink" href="#generated-files" title="Link to this heading"></a></h3>
<p>On first run, the <code class="docutils literal notranslate"><span class="pre">timew-status-indicator</span></code> script will create its YAML
configuration file in the standard XDG location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$HOME/.config/timew_status_indicator/config.yaml
</pre></div>
</div>
<p>with the following contents:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">day_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">08:00</span>
<span class="nt">day_snooze</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01:00</span>
<span class="nt">seat_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">01:30</span>
<span class="nt">seat_snooze</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00:40</span>
<span class="nt">seat_reset_on_stop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">use_last_tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">use_symbolic_icons</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">extension_script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">onelineday</span>
<span class="nt">default_jtag_str</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vct-sw,implement skeleton timew indicator</span>
<span class="nt">jtag_separator</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;,&#39;</span>
<span class="nt">loop_idle_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="nt">show_state_label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">terminal_emulator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnome-terminal</span>
</pre></div>
</div>
<p>Edit the above file to set your preferred values. Note the default value
of <code class="docutils literal notranslate"><span class="pre">loop_idle_seconds</span></code> seems to be a happy medium between update rate
and wasted CPU cycles.</p>
</section>
<section id="uninstalling">
<h3>Uninstalling<a class="headerlink" href="#uninstalling" title="Link to this heading"></a></h3>
<p>Depending on how it was installed, use on or more of the following:</p>
<ul class="simple">
<li><p>delete the cloned directory, eg, <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">path/to/timew-addons</span></code></p></li>
<li><p>delete the virtual environment, eg, <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-rf</span> <span class="pre">``.venv</span></code></p></li>
</ul>
<p>If you installed into a local env via <code class="docutils literal notranslate"><span class="pre">pip</span></code> then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip uninstall timew-addons
</pre></div>
</div>
<ul class="simple">
<li><p>or, remove the OS package, eg, on Ubuntu:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt remove timew-addons
$ sudo apt autoremove
</pre></div>
</div>
<p>Finally, delete the configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rm $HOME/.config/timew_status_indicator/config.yaml
</pre></div>
</div>
</section>
</section>
<section id="reporting-examples">
<h2>Reporting examples<a class="headerlink" href="#reporting-examples" title="Link to this heading"></a></h2>
<p>The following extension examples can be found in the <code class="docutils literal notranslate"><span class="pre">extensions</span></code> folder
in the top-level of the sdist or repository:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">onelineday.py</span></code> - a real-world custom report example</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">totals.py</span></code> - a totals-by-tag report based on the <a class="reference external" href="https://github.com/lauft/timew-report/blob/master/README.md">upstream example</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">csv_rpt.py</span></code> - a simple CSV report also based on the <a class="reference external" href="https://github.com/lauft/timew-report/blob/master/README.md">upstream example</a></p></li>
</ul>
<p>They must be manually installed to the location shown below.</p>
<section id="extension-usage">
<h3>Extension usage<a class="headerlink" href="#extension-usage" title="Link to this heading"></a></h3>
<p>In general, report extension scripts are installed under <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> in the
timewarrior extensions folder, which on Linux equates to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls ~/.timewarrior/extensions
csv_rpt.py  onelineday.py totals.py
</pre></div>
</div>
<p>To use the report extensions, first install timewarrior <a class="reference external" href="https://timewarrior.net/docs/install/">on your platform</a>
and run the command from a console prompt, then find the extensions directory,
something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo emerge app-misc/timew --ask
$ timew -h
$ find $HOME -maxdepth 1 -name .timewarrior -type d
/home/user/.timewarrior
$ ls /home/user/.timewarrior
data  extensions  timewarrior.cfg
</pre></div>
</div>
<p>Finally, copy the desired extension(s) into the extensions folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cp /usr/lib/timew-addons/extensions/onelineday.py ~/.timewarrior/extensions/
</pre></div>
</div>
<p>When using OS packages, extensions should be installed to the above path.</p>
<p>Run the extension by substituting the extension name for the usual “summary”
command, eg, instead of <code class="docutils literal notranslate"><span class="pre">timew</span> <span class="pre">summary</span> <span class="pre">june</span></code>, use something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ timew onelineday june
</pre></div>
</div>
<p>Extension names can also be aliases of the full extension filename, so
using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ timew one today
</pre></div>
</div>
<p>should also work.</p>
</section>
<section id="environment">
<h3>Environment<a class="headerlink" href="#environment" title="Link to this heading"></a></h3>
<p>The report extensions used by the <a class="reference internal" href="#appindicator-gui">Appindicator GUI</a> have 2 output formats:</p>
<ul class="simple">
<li><p>the default verbose mode is “human” report output</p></li>
<li><p>the optional terse mode is consumed and displayed by the GUI</p></li>
</ul>
<p>The output mode and job-tag separator are exported as shell environment
variables by the GUI script on startup, which affects <em>only the internal</em>
runtime environment of the GUI. However, this means the variables are set
in the shell environment of the terminal launched by the menu option, so
running <code class="docutils literal notranslate"><span class="pre">timew</span></code> commands from this terminal instance will use the “terse”
output mode unless the environment variable is unset, eg, after launching
a terminal from the GUI menu, run the following in that terminal window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ timew one yesterday
xyz-test;08:39:36
vctlabs;00:36:20
total;09:15:56
$ unset INDICATOR_FMT
$ timew one yesterday
Duration has 1 days and 2 total job tags:
[&#39;xyz-test&#39;, &#39;vctlabs&#39;]

-- xyz-test
2024-08-23 3:58:47 xyz-test,continue test case document structure
2024-08-23 2:38:37 xyz-test,test doc development
2024-08-23 0:18:55 xyz-test,test doc development discussion
2024-08-23 1:43:17 xyz-test,test status mtg

Total for xyz-test: 08:39:36 hrs

-- vctlabs
2024-08-23 0:36:20 vctlabs,project status/planning mtg

Total for vctlabs: 00:36:20 hrs

Final total for all jobs in duration: 09:15:56 hrs
</pre></div>
</div>
</section>
</section>
<section id="appindicator-gui">
<h2>Appindicator GUI<a class="headerlink" href="#appindicator-gui" title="Link to this heading"></a></h2>
<p>timew-status-indicator is a control and status application for timew that
runs from the system tray on XDG-compliant Linux desktops.</p>
<p>And by “application” we mean a simple appindicator-based GUI which is
basically just an icon with a menu. It loads in the indicator area or the
system tray (whatever is available in your desktop environment). The icon’s
menu allows you to start and stop time tracking, as well as get status
and edit the timew tag string. The tray icon appearance will
update to show the current state of timew vs configurable limits.</p>
<section id="gui-usage">
<h3>GUI usage<a class="headerlink" href="#gui-usage" title="Link to this heading"></a></h3>
<p>Select Timew Status Tool from the Applications View or the Utils menu in
your desktop of choice, eg, Gnome, Unity, Xfce, etc.  You can also add it to
your session startup or run it from an X terminal to get some debug output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ timew-status-indicator
</pre></div>
</div>
<section id="what-exactly-are-we-tracking">
<h4>What exactly are we tracking?<a class="headerlink" href="#what-exactly-are-we-tracking" title="Link to this heading"></a></h4>
<p>Simply put, we want to track work hours and seat time in the context of
the daily hours tracked via the <code class="docutils literal notranslate"><span class="pre">timew</span></code> command. The configuration file
contains 2 parameters each for setting desired limits, the base max value,
and an optional “snooze” period:</p>
<dl class="field-list simple">
<dt class="field-odd">day_max<span class="colon">:</span></dt>
<dd class="field-odd"><p>target number of daily work hours</p>
</dd>
<dt class="field-even">day_snooze<span class="colon">:</span></dt>
<dd class="field-even"><p>additional snooze period appended to daily max</p>
</dd>
<dt class="field-odd">seat_max<span class="colon">:</span></dt>
<dd class="field-odd"><p>max number of minutes to stay seated</p>
</dd>
<dt class="field-even">seat_snooze<span class="colon">:</span></dt>
<dd class="field-even"><p>additional snooze period appended to seat max</p>
</dd>
</dl>
<p>Values for the above are given in hours and minutes formatted
as “time” strings, eg, the following sets an 8-hour max:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">day_max</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;08:00&quot;</span>
</pre></div>
</div>
<p>The seat timer can be disabled by setting both <em>max</em> and <em>snooze</em> to
zeros, ie, set both values like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">seat_max</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;00:00&quot;</span>
<span class="nt">seat_snooze</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;00:00&quot;</span>
</pre></div>
</div>
</section>
<section id="status-indicator-gui">
<h4>Status indicator GUI<a class="headerlink" href="#status-indicator-gui" title="Link to this heading"></a></h4>
<p>It would not be an <a class="reference external" href="https://lazka.github.io/pgi-docs/AyatanaAppIndicator3-0.1/index.html">Appindicator</a> without icons, so we use icons as one way
to show current state. This has nothing to do with application state; in
this case we only care about the state of our <em>timew tracking interval</em>;
note this includes the seat timer warnings when there is an active timew
tracking interval. The states and corresponding icons are shown below:</p>
<dl class="field-list simple">
<dt class="field-odd">INACTIVE<span class="colon">:</span></dt>
<dd class="field-odd"><p><img alt="inactive" src="_images/timew_inactive.svg" /> The state when there is no active tracking interval.</p>
</dd>
<dt class="field-even">INFO<span class="colon">:</span></dt>
<dd class="field-even"><p><img alt="info" src="_images/timew_info.svg" /> The default active state when tracking interval is open.</p>
</dd>
<dt class="field-odd">WARNING<span class="colon">:</span></dt>
<dd class="field-odd"><p><img alt="warn" src="_images/timew_warning.svg" /> The state when either timer has reached the snooze period.</p>
</dd>
<dt class="field-even">ERROR<span class="colon">:</span></dt>
<dd class="field-even"><p><img alt="err" src="_images/timew_error.svg" /> The state when either snooze period has expired.</p>
</dd>
<dt class="field-odd">APP<span class="colon">:</span></dt>
<dd class="field-odd"><p><img alt="app" src="_images/timew.svg" /> While not a state, we use this to retrieve the app icon.</p>
</dd>
</dl>
</section>
</section>
<section id="pygobject-references">
<h3>PyGObject references<a class="headerlink" href="#pygobject-references" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://lazka.github.io/pgi-docs/">https://lazka.github.io/pgi-docs/</a>  PyGObject API Reference</p></li>
<li><p><a class="reference external" href="https://pygobject-tutorial.readthedocs.io/en/latest/index.html">https://pygobject-tutorial.readthedocs.io/en/latest/index.html</a>  Tutorial</p></li>
<li><p><a class="reference external" href="https://github.com/candidtim/vagrant-appindicator">https://github.com/candidtim/vagrant-appindicator</a>  (old)</p></li>
</ul>
</section>
</section>
<section id="operating-system-support">
<h2>Operating System Support<a class="headerlink" href="#operating-system-support" title="Link to this heading"></a></h2>
<p>The extension scripts require a basic console environment with both
timewarrior and the timew-report packages installed (usually via system
package manager). Running the indicator GUI script requires both
<a class="reference external" href="https://docs.python.org/3/contents.html">Python</a> and a modern Gtk+ windowing environment with <a class="reference external" href="https://pygobject.gnome.org/tutorials/gtk3.html">Gtk3</a> and
<a class="reference external" href="https://pygobject.gnome.org/index.html">PyGObject</a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The GUI script requires one of the following extensions to
to parse the current time total from the <code class="docutils literal notranslate"><span class="pre">timew</span></code> output.
They have been modified to check an environment variable
and output a summary CSV format.</p>
</div>
<p>Install either <code class="docutils literal notranslate"><span class="pre">onelineday.py</span></code> or <code class="docutils literal notranslate"><span class="pre">totals.py</span></code> as shown above, depending
on preferred tag format:</p>
<dl class="simple">
<dt>onelineday</dt><dd><p>Use for job-tag prefix format with sub-totals. See the docstring in
<code class="docutils literal notranslate"><span class="pre">onelineday.py</span></code> for more details.</p>
</dd>
<dt>totals</dt><dd><p>Use for free-form tag format <em>without</em> a job-tag prefix.</p>
</dd>
</dl>
<p>Set the extension script in the config file with the following key, using
either “onelineday” or “totals” for the value. Similarly set the job-tag
separator if needed:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">extension_script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">onelineday</span>
<span class="nt">jtag_separator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;;&quot;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Developer/User Overview for Timew-Addons" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api/modules.html" class="btn btn-neutral float-right" title="timew_status" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Stephen L Arnold.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>